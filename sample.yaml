---
name: people
desc: A list of people their ages and their hobbies in MySQL
driver: mysql

DELETE:
  collection: # nuke the bloody lot
  member: # delete the addressed member

GET:
  collection: # when addressed as a collection this set of queries and transforms are done
    query:
      op: SELECT id, name FROM people
    transforms:
    - op: limit
      limit: "{{ url.limit }}"
    - op: pagify
      amount: 10
      page: "{{ url.page }}"

  member: # when addressed as a member this query and transform is done
    query:
      op: SELECT * FROM people WHERE id=%s
      params:
      - "{{ uri.member }}"
    transforms:
    - op: data
      data:
        name: "{{ this.name }}"
        age: "{{ this.age }}"
        bio: "{{ this.name }} likes {{ this.hobbies }}"
    - op: types
      types:
        name: string
        age: integer

POST:
  collection: # inserts a new entries in to the collection
    query:
      op: INSERT INTO people (name, age, hobbies) VALUES (%s, %s, %s)
      params:
      - "{{ url.name }}"
      - "{{ url.age }}"
      - "{{ url.hobbies  }}"
   # member not used

PUT:
  collection: # replace entire collection with whatever we've got, maybe could hook in to DELETE
  member: # replace the existing members, or create

PATCH:
  # collection not used
  member: # update the members
